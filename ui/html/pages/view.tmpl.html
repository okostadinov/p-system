{{define "title"}}Patient #{{.Patient.ID}}{{end}}

{{define "main"}}
    {{if .Patient}}
    <h1>Пациент: {{.Patient.FirstName}} {{.Patient.LastName}}</h1>
    <form action="/patients/{{.Patient.ID}}" method="POST" novalidate>
        <div>
            <label for="ucn">ЕГН</label>
            {{with .Form.FieldErrors.ucn}}
                <label for="ucn" class="error">{{.}}</label>
            {{end}}    
            <input name="ucn" id="ucn" type="text" value="{{.Patient.UCN}}">
        </div>
        <div>
            <label for="first_name">Име</label>
            {{with .Form.FieldErrors.first_name}}
                <label for="first_name" class="error">{{.}}</label>
            {{end}}    
            <input name="first_name" id="first_name" type="text" value="{{.Patient.FirstName}}">
        </div>
        <div>
            <label for="last_name">Фамилия</label>
            {{with .Form.FieldErrors.last_name}}
                <label for="last_name" class="error">{{.}}</label>
            {{end}}    
            <input name="last_name" id="last_name" type="text" value="{{.Patient.LastName}}">
        </div>
        <div>
            <label for="phone_number">Номер</label>
            {{with .Form.FieldErrors.phone_number}}
                <label for="phone_number" class="error">{{.}}</label>
            {{end}}
            <input name="phone_number" id="phone_number" type="text" value="{{.Patient.PhoneNumber}}">
        </div>
        <div>
            <label for="height">Ръст</label>
            {{with .Form.FieldErrors.height}}
                <label for="height" class="error">{{.}}</label>
            {{end}}    
            <input name="height" id="height" type="number" value="{{.Patient.Height}}">
        </div>
        <div>
            <label for="weight">Тегло</label>
            {{with .Form.FieldErrors.weight}}
                <label for="weight" class="error">{{.}}</label>
            {{end}}    
            <input name="weight" id="weight" type="number" value="{{.Patient.Weight}}">
        </div>
        <div>
            <label for="medication">Медикамент</label>
            <select name="medication" id="medication">
                {{$p := .Patient}}
                {{range .Medications}}
                    <option value="{{.Name}}"{{if eq $p.Medication .Name}}selected{{end}}>{{.Name}}</option>
                {{end}}
            </select>
        </div>
        <div>
            <label for="note">Коментар</label>
            {{with .Form.FieldErrors.note}}
                <label for="note" class="error">{{.}}</label>
            {{end}}    
            <textarea name="note" id="note">{{.Patient.Note}}</textarea>
        </div>
        <div>
            <fieldset>
                <legend>Одобрен</legend>
                <div>
                    <label>
                        <input name="approved" type="radio" value="true" {{if .Patient.Approved}}checked{{end}}> Да
                    </label>
                </div>
                <div>
                    <label>
                        <input name="approved" type="radio" value="false" {{if not .Patient.Approved}}checked{{end}}> Не
                    </label>
                </div>
            </fieldset>
        </div>
        <div>
            <fieldset>
                <legend>Първо продължение</legend>
                <div>
                    <label>
                        <input name="first_continuation" type="radio" value="true" {{if .Patient.FirstContinuation}}checked{{end}}> Да
                    </label>
                </div>
                <div>
                    <label>
                        <input name="first_continuation" type="radio" value="false" {{if not .Patient.FirstContinuation}}checked{{end}}> Не
                    </label>
                </div>
            </fieldset>
        </div>
        <div>
            <input type="submit" value="Запази">
        </div>
    </form> 
    {{end}}
{{end}}